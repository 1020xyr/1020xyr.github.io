---
title: CCF201403-3 命令行选项
date: 2019-11-30 09:54:45
tags: CCF201403-3 命令行选项
categories: 算法
---
<meta name="referrer" content="no-referrer" />



# CCF201403-3 命令行选项
评测100分代码
```cpp
#include<iostream>
#include<stdio.h>
#include<string>
#include<cstring>
#include<vector>
#include<algorithm>
using namespace std;

typedef struct Select{
	string line;
	string arg;
	bool flag;
	Select(){			//初始化
		line = "";
		arg = "";
		flag = false;
	}
}Select;
int find(char c,string s){	//从格式化字符串中匹配选项
	int index = s.find(c);
	if(index<0&&index>=s.size()){
		return -1;			//未找到
	}
	if(index+1<s.size()&&s[index+1]==':'){
		return 2;			//带参数
	}
	return 1;				//不带参数
}
bool cmp(Select a,Select b){		//sort中的排序函数 字母升序
	return a.line[1]<b.line[1];
}
int FindIndex(vector<Select> ans,Select t){			//从结果容器中找选项，看是否重复
	int len = ans.size();
	int index = -1;
	for(int i=0;i<len;i++){
		if(ans[i].line==t.line){
			index = i;
		}
	}
	return index;
}
void process(string s,int Num){
	char line[300];
	gets(line);
	vector<string> query;
	char* sp = strtok(line," ");		//分割字符串
	while(sp){
		query.push_back(sp);
		sp = strtok(NULL," ");
	}

	int len = query.size();
	vector<Select> ans;
	for(int i=1;i<len;i++){
		if(query[i][0]!='-')		//非法字符串
			break;
		char c = query[i][1];
		if(find(c,s)==1){			//无参数
			Select tmp;
			tmp.line=query[i];
			int index = FindIndex(ans,tmp);
			if(index==-1)
				ans.push_back(tmp);
		}
		else if(find(c,s)==2){		//带参数
			if(i<len-1){
				Select tmp;
				tmp.line=query[i];
				tmp.arg=query[i+1];
				tmp.flag=true;
				i++;
				int index = FindIndex(ans,tmp);
				if(index==-1){
					ans.push_back(tmp);
				}
				else{							//重复则更新参数
					ans[index].arg = query[i]; //i已经加1了
				}
			}
			else{
				break;
			}
		}
		else{
			break;
		}
	}
	sort(ans.begin(),ans.end(),cmp);		//字母升序
	cout<<"Case "<<Num+1<<": ";
	for(int i=0;i<ans.size();i++){
		if(ans[i].flag){
			cout<<ans[i].line<<" "<<ans[i].arg<<" ";
		}
		else{
			cout<<ans[i].line<<" ";
		}
	}
	cout<<endl;
}
void func(){
	char args[60];
	gets(args);
	string s(args);
	int n;
	cin>>n;
	char tmp = getchar();
	for(int i=0;i<n;i++){
		process(s, i);
	}
}
int main(){
	func();
	return 0;
}
```

