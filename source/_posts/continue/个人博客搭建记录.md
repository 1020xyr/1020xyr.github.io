---
title: 个人博客搭建记录
date:  2023-09-24 11:22:19 
tags: 个人博客 hexo+github
categories: 踩坑日记
index_img: http://gss0.baidu.com/7Po3dSag_xI4khGko9WTAnF6hhy/zhidao/wh%3D450%2C600/sign=ed36e5f7bc096b63814c56543903ab72/b64543a98226cffcf9679d6abb014a90f703ea9d.jpg
---
<meta name="referrer" content="no-referrer" />


使用github page+hexo搭建，主题为fluid，搭建步骤参照：[Github + hexo 实现自己的个人博客、配置主题（超详细）](https://juejin.cn/post/7064515729298554887)

主题：[https://hexo.fluid-dev.com/](https://hexo.fluid-dev.com/)

搭建时的问题：

#####  1 Ubuntu apt默认下载的nodejs版本过低，snap安装18.18的node js

#####  2 在source目录下添加CNAME文件指定个人域名

#####  3 在iconfont中搜索所需图标，并通过自定义css导入项目 [自定义图标](https://hexo.fluid-dev.com/docs/icon/#%E5%86%85%E7%BD%AE%E7%A4%BE%E4%BA%A4%E5%9B%BE%E6%A0%87)

#####  4 在source目录下添加本地图片以便博客引用

#####  5 通过[CsdnSyncHexo](https://github.com/flytam/CsdnSyncHexo)将csdn博客导出为markdown格式并移至source/_posts目录下

#####  6 csdn博客迁移后图片显示403, 只需要在每个文章的头部加上这么一句代码就可以 `<meta name="referrer" content="no-referrer" />`

 ![](https://img-blog.csdnimg.cn/a9cdb47c4f554d8aa689d9ca6838920d.png)
[Hexo 搭建：图片不能正常显示问题（简书图片403）](https://www.jianshu.com/p/da8900de07df)

 该语句能生效的原因：
 http请求头中有一个referrer字段，用来表示发起http请求的源地址信息
服务器端在拿到这个referrer值后判断请求是否来自本站
若不是则返回403，从而实现图片的防盗链。上面出现403就是因为，请求的是别人服务器上的资源，但把自己的referrer信息带过去了，被对方服务器拦截返回了403
在前端可以通过meta来设置referrer policy(来源策略)，referrer设置成no-referrer，发送请求不会带上referrer信息，对方服务器也就无法拦截了  

 [get请求图片出现403 防盗链解决方式 no-referrer](https://blog.csdn.net/laoli360/article/details/120839178)

 通过vscode替换功能一次性更新所有博客md文件


```bash
---

<!--more-->

# 换成

---
<meta name="referrer" content="no-referrer" />
<!--more-->
```

#####  7 csdn导出的markdown文件toc目录未能正常显示，文章开头没有以下类似的东西，只显示一个TOC字符

 ![](https://img-blog.csdnimg.cn/7dec573c7a3b4723930929fa08ccaa5b.png)
 但发现侧边栏也有目录，故删去TOC语句
 ![](https://img-blog.csdnimg.cn/1578f89d5d854c318c3b32f6b0345cac.png)
通过vscode正则匹配一次性删去所有TOC行

```c
^.*(@[TOC]).*\n
```
[VSCode 批量删除指定匹配的一整行](https://www.teojs.com/docs/2021/11/01.html#%E9%97%AE%E9%A2%98)

##### 8 导出的markdown文件分类以空格分割，需手动改成-[]分割

```yaml
categories: 踩坑日记 源码剖析 内核驱动开发记录

# 改成

categories: 
- [踩坑日记]
- [源码剖析]
- [内核驱动开发记录]
```
[分类和标签](https://hexo.io/zh-cn/docs/front-matter)

#####  9 代码风格改成atom-one-dark

```yaml
    highlightjs:
      # 在链接中挑选 style 填入
      # Select a style in the link
      # See: https://highlightjs.org/static/demo/
      style: "atom-one-dark"
      style_dark: "atom-one-dark"
```
[https://highlightjs.org/demo](https://highlightjs.org/demo)
好像要npm install highlightjs --save

##### 10 添加音乐播放器

在网易云得到外链

```bash
<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=86 src="//music.163.com/outchain/player?type=2&id=65800&auto=1&height=66"></iframe>
```
在node_modules/hexo-theme-fluid/layout/about.ejs中加入

```bash
<div class="music-player">
  <iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=86 src="//music.163.com/outchain/player?type=2&id=65800&auto=1&height=66"></iframe>
</div>
```

==可以通过修改node_modules/hexo-theme-fluid/修改页面信息==
最终效果：
![](https://img-blog.csdnimg.cn/e11a831432074d269a72857e14d198e4.png)
[hexo 第四讲 -- 界面中加入音乐](https://hapitoku.github.io/2021/04/08/blog/hexo/hexo-%E7%AC%AC%E5%9B%9B%E8%AE%B2--%E7%95%8C%E9%9D%A2%E4%B8%AD%E5%8A%A0%E5%85%A5%E9%9F%B3%E4%B9%90/)

##### 11 增加评论功能

主要依据以下这篇博客，注册leancloud账号，将AppID AppKey serverURLs填入valine配置中，不过这博客有点误导人，以为serverURLs是填安全域名呢，实际上应该填REST API 服务器地址
[hexo-fluid添加valine评论记录](https://cloud.tencent.com/developer/article/1923519)

效果：
![](https://img-blog.csdnimg.cn/fff7c3af07704e09817d3c4ea2b17f9a.png)

##### 12 增加访问数统计

主要依据[Hexo-fluid主题设置统计博客阅读量](https://blog.csdn.net/qq_48759664/article/details/119460188#:~:text=%E6%AF%8F%E7%AF%87%E5%8D%9A%E5%AE%A2%E7%9A%84%E6%95%B0%E6%8D%AE%E7%BB%9F%E8%AE%A1%20views%20%E4%B8%8B%E6%96%B9%E6%9C%89%E4%B8%A4%E4%B8%AA%E5%8F%82%E6%95%B0%EF%BC%8C%E4%B8%80%E4%B8%AA%E6%98%AF%20enable%EF%BC%8C%E5%B0%86%E5%85%B6%E8%AE%BE%E7%BD%AE%E4%B8%BA%20enable%20%E6%88%96,true%20%E9%83%BD%E5%8F%AF%E4%BB%A5%EF%BC%9B%E4%B8%80%E4%B8%AA%E6%98%AF%E7%BB%9F%E8%AE%A1%E7%9A%84%E6%9D%A5%E6%BA%90%20source%EF%BC%8C%E8%AE%BE%E7%BD%AE%E4%B8%BA%20leancloud%E3%80%82%20%E5%AE%8C%E6%88%90%E4%BB%A5%E4%B8%8A%E9%85%8D%E7%BD%AE%E4%B9%8B%E5%90%8E%EF%BC%8C%E5%B0%86%E6%89%80%E6%9C%89%E5%8F%98%E6%9B%B4%20Push%20%E5%88%B0%E6%9C%8D%E5%8A%A1%E5%99%A8%EF%BC%8C%E7%A8%8D%E7%AD%89%E4%B8%80%E5%B0%8F%E4%BC%9A%EF%BC%8C%E5%88%B7%E6%96%B0%E8%87%AA%E5%B7%B1%E7%9A%84%E5%8D%9A%E5%AE%A2%EF%BC%8C%E4%B8%80%E8%88%AC%E6%83%85%E5%86%B5%E4%B8%8B%EF%BC%8C%E5%B0%B1%E5%8F%AF%E4%BB%A5%E5%9C%A8%E6%AF%8F%E7%AF%87%E5%8D%9A%E5%AE%A2%E7%9A%84%E9%A1%B6%E9%83%A8%E7%9C%8B%E5%88%B0%E9%98%85%E8%AF%BB%E9%87%8F%E7%9A%84%E7%BB%9F%E8%AE%A1%E6%95%B0%E6%8D%AE%E4%BA%86%E3%80%82)同样在leancloud创建应用，得到AppID AppKey serverURLs，而后修改主题配置，注意填入serverURLs。但这篇博客只使能了博客阅读次数统计，实际上还有总访问次数统计
![](https://img-blog.csdnimg.cn/b2fb58e7afaf40ec8d804eb08fa72e7d.png)
最终效果：
![](https://img-blog.csdnimg.cn/237a54f398af4193bd2627c63dbdb554.png)
![](https://img-blog.csdnimg.cn/687627c478fc472fb17088cc6880e14a.png)

##### 13 将网站加入各个搜索引擎

参考博客：
[hexo博客的高级SEO优化【灰鸿】](https://zhuanlan.zhihu.com/p/344927945)
[如何在Google Search Console里设置网站域名的DNS验证](https://zhuanlan.zhihu.com/p/498470127)

将网站加入百度，必应，谷歌3个网站，添加sitemap站点地图，优化URL，代码压缩

**百度加入网站步骤一大堆，烦死了，真恶心**

##### 14 自动摘要

![](https://img-blog.csdnimg.cn/80274f5e17344893b88f858ba1a5bb26.png)
csdn导出的markdown文件都有一行`<!--more-->`，妨碍了生成自动摘要，全部删除

##### 15 博客封面未能成功显示，返回403![，](https://img-blog.csdnimg.cn/28e52364637d41c2953ce90171c08b46.png)

在node_modules/hexo-theme-fluid/layout/index.ejs文件中加入no-referrer语句  （与加入音乐播放器类似的思路）
![](https://img-blog.csdnimg.cn/a70091aacb614af498b32d28f8e2effe.png)

![](https://img-blog.csdnimg.cn/c2350637911f4ffb876b205988410d24.png)

**目录结构**
![](https://img-blog.csdnimg.cn/e4b5b5c2c74f4643aaa2e3b405a3db98.png)





##### 16 使用hexo-seo-autopush每天自动提交url到百度和谷歌必应

相关步骤：

[https://github.com/Lete114/Hexo-SEO-AutoPush](https://github.com/Lete114/Hexo-SEO-AutoPush)

说明：

每天中午 12 点推送一次网站信息到 Baidu 和 Bing，提高爬虫抓取几率

可手动点击`star`触发 Actions
